---
title: 集合
tags:
  - 集合方法
  - 集合遍历
  - Iterator 迭代器
date: 2018-07-31 15:03:04
categories: Java
top:
---
# 集合类概述
## 为什么出现集合类？
>　　我们学习的是面向对象语言，而面向对象语言对事物的描述是通过对象体现的，为了方便对多个对象进行操作，我们就必须把这多个对象进行存储。而要想存储多个对象，就不能是一个基本的变量，而应该是一个容器类型的变量，在我们目前所学过的知识里面，有哪些是容器类型的呢?　　　　　　　
>　　数组和StringBuffer。但是呢?StringBuffer的结果是一个字符串，不一定满足我们的要求，所以我们只能选择数组，这就是对象数组。
>　　而对象数组又不能适应变化的需求，因为数组的长度是固定的，这个时候，为了适应变化的需求，Java就提供了集合类供我们使用。

<!-- more -->

## 数组与集合的区别
- 数组和集合的区别?
1. 长度区别
	- 数组的长度固定
	- 集合长度可变
2. B:内容不同
	- 数组存储的是同一种类型的元素
	- 而集合可以存储不同类型的元素
3. C:元素的数据类型问题	
	- 数组可以存储基本数据类型，也可以存储引用数据类型
	- 集合只能存储引用类型

# Collection接口概述
> Collection:是集合的顶层接口，它的子体系有重复的，有唯一的，有有序的，有无序的。

## Collection的功能
1. 添加功能：
	- boolean add(Object obj):添加一个元素
	- boolean addAll(Object obj):添加一个集合的元素
2. 删除功能：
	- void clear():移除所有元素
	- boolean remove(Object obj):移除一个元素
	- boolean removeAll(Collection c): 移除一个集合的元素
3. 判断功能
	- boolean contains(Object obj):判断集合中是否包含指定的元素
	- boolean containsAll(COllection c):判断集合中是否包含指定的集合元素
	- boolean isEmpty():判断集合是否为空
4. 获取功能：
	- Iterator<E> iterator() 
5. 长度功能：
	- int size():元素的个数
6. 交集功能
	- boolean retainAll(Collecton c):二个集合都有的元素
7. 集合转换为数组
	- Object[] toArray()
	- public <T> T[] toArray(T[] a)
	```
	Integer[] i = new Integer[array.size()];
	Integer[] ii = array.toArray(i);
	i 和 ii 的地址一样
	array.toArray(i);	//表示将集合的数据转到了Intger数组 i 中
	```

8. 数组转集合
	- public static <T> List<T> asList<T> (T... a) 
	- **虽然可以把数组转成集合，但是集合的长度不能改变。**

```
List<String> list = Arrays.asList("hello", "world", "java");

//	list.add("javaee");			// UnsupportedOperationException,不支持的操作
// list.remove(1);				// UnsupportedOperationException

list.set(0, "javaee");
```
 
### 创建集合对象
```
	Collection c = new ArrayList();
// Collection c = new Collection(); //错误，因为接口不能实例化
```

### 添加元素
- `boolean add(Object obj):添加一个元素`
```
c.add("hello");
c.add("world");
c.add("java");
System.out.println("c:" + c);		//c:[hello, world, java]
```

### 移除所有元素
- `void clear():移除所有元素`
- `boolean remove(Object o):移除一个元素`
- `boolean contains(Object o)：判断集合中是否包含指定的元素`
```
c.clear();
System.out.println("c:" + c);		//c:[]

System.out.println("remove:" + c.remove("hello"));		//remove:true
System.out.println("c:" + c);							//c:[world, java]

System.out.println("remove:" + c.remove("javaee"));		//remove:false
System.out.println("c:" + c);							//c:[world, java]

System.out.println("contains:"+c.contains("hello"));	//contains:true
System.out.println("contains:"+c.contains("android"));	//contains:false

System.out.println("isEmpty:"+c.isEmpty());				//isEmpty:false

System.out.println("size:"+c.size());					//size:3
```

### 带All的方法
* boolean addAll(Collection c):添加一个集合的元素
* boolean removeAll(Collection c):移除一个集合的元素(是一个还是所有)
* boolean containsAll(Collection c)：判断集合中是否包含指定的集合元素(是一个还是所有)
* boolean retainAll(Collection c):两个集合都有的元素?思考元素去哪了，返回的boolean又是什么意思呢?

```
		// 创建集合1
		Collection c1 = new ArrayList();
		c1.add("abc1");
		c1.add("abc2");
		c1.add("abc3");
		c1.add("abc4");

		// 创建集合2
		Collection c2 = new ArrayList();
 		c2.add("abc1");
 		c2.add("abc2");
 		c2.add("abc3");
 		c2.add("abc4");
		c2.add("abc5");
		c2.add("abc6");
		c2.add("abc7");
```

#### 添加
`boolean addAll(Collection c):添加一个集合的元素`
```
System.out.println("addAll:" + c1.addAll(c2));

System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
addAll:true
c1:[abc1, abc2, abc3, abc4, abc1, abc2, abc3, abc4, abc5, abc6, abc7]
c2:[abc1, abc2, abc3, abc4, abc5, abc6, abc7]
```

#### 删除
`boolean removeAll(Collection c):移除一个集合的元素(是一个)`
- 只要有一个数据被移除，就返回true
```
System.out.println("removeAll:"+c1.removeAll(c2));
System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
removeAll:true
c1:[]
c2:[abc1, abc2, abc3, abc4, abc5, abc6, abc7]

```

#### 包含
`boolean containsAll(Collection c)：判断集合中是否包含指定的集合元素(是所有)`
- 只有包含所有的元素，才叫包含
```
System.out.println("containsAll:"+c1.containsAll(c2));
System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
containsAll:false
c1:[abc1, abc2, abc3, abc4]
c2:[abc1, abc2, abc3, abc4, abc5, abc6, abc7]

System.out.println("containsAll:"+c2.containsAll(c1));
System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
containsAll:true
c1:[abc1, abc2, abc3, abc4]
c2:[abc1, abc2, abc3, abc4, abc5, abc6, abc7]
```

#### 交集
`boolean retainAll(Collection c):两个集合都有的元素?思考元素去哪了，返回的boolean又是什么意思呢?`
> 假设有两个集合A，B。
> A对B做交集，最终的结果保存在A中，B不变。
> 返回值表示的是A是否发生过改变。

```
System.out.println("retainAll:"+c1.retainAll(c2));
System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
retainAll:false
c1:[abc1, abc2, abc3, abc4]
c2:[abc1, abc2, abc3, abc4, abc5, abc6, abc7]

System.out.println("retainAll:"+c2.retainAll(c1));
System.out.println("c1:" + c1);
System.out.println("c2:" + c2);
--------------------------------------------------
结果：
retainAll:true
c1:[abc1, abc2, abc3, abc4]
c2:[abc1, abc2, abc3, abc4]
```

## 集合的遍历
### 集合转成数组

#### 字符串的遍历
`Object[] toArray():把集合转成数组，可以实现集合的遍历`
```
// 创建集合对象
Collection c = new ArrayList();

// 添加元素
c.add("hello"); // Object obj = "hello"; 向上转型
c.add("world");
c.add("java");

// 遍历
// Object[] toArray():把集合转成数组，可以实现集合的遍历
Object[] objs = c.toArray();
for (int x = 0; x < objs.length; x++) {
	// System.out.println(objs[x]);

	// 元素是字符串，获取到元素的的同时，还想知道元素的长度。
	// System.out.println(objs[x] + "---" + objs[x].length());
	
	// 上面的实现不了，原因是Object中没有length()方法
	// 我们要想使用字符串的方法，就必须把元素还原成字符串
	
	// 向下转型
	String s = (String) objs[x];
	System.out.println(s + "---" + s.length());
}

结果：
	hello---5
	world---5
	java---4
```

#### 对象集合的遍历
```
// 创建集合对象
Collection c = new ArrayList();

// 创建学生对象
Student s1 = new Student("花绛沁", 27);
Student s2 = new Student("花锦瑟", 30);
Student s3 = new Student("尹幽妍", 33);
Student s4 = new Student("上官柳丝", 25);
Student s5 = new Student("蝶恋花", 22);

// 把学生添加到集合
c.add(s1);
c.add(s2);
c.add(s3);
c.add(s4);
c.add(s5);

// 把集合转成数组
Object[] objs = c.toArray();
// 遍历数组
for (int x = 0; x < objs.length; x++) {
	// System.out.println(objs[x]);
	//向下转型
	Student s = (Student) objs[x];
	System.out.println(s.getName() + "---" + s.getAge());
}
结果：
	花绛沁---27
	花锦瑟---30
	尹幽妍---33
	上官柳丝---25
	蝶恋花---22
```
### 迭代器
**Iterator iterator():迭代器，集合的专用遍历方式**
* Object next():获取元素,并移动到下一个位置。
* NoSuchElementException：没有这样的元素，因为你已经找到最后了。
* boolean hasNext():如果仍有元素可以迭代，则返回 true。

#### 字符串的遍历
```
// 创建集合对象
Collection c = new ArrayList();

// 创建并添加元素
// String s = "hello";
// c.add(s);

c.add("hello");
c.add("world");
c.add("java");

// Iterator iterator():迭代器，集合的专用遍历方式
Iterator it = c.iterator(); // 实际返回的肯定是子类对象，这里是多态

while (it.hasNext()) {
	// System.out.println(it.next());

	String s = (String) it.next();
	System.out.println(s);
}

结果：
	hello
	world
	java
```

#### 对象集合的遍历
```
// 创建集合对象
Collection c = new ArrayList();

// 创建学生对象
Student s1 = new Student("花绛沁", 27);
Student s2 = new Student("花锦瑟", 30);
Student s3 = new Student("尹幽妍", 33);
Student s4 = new Student("上官柳丝", 25);
Student s5 = new Student("蝶恋花", 22);

// 把学生添加到集合
c.add(s1);
c.add(s2);
c.add(s3);
c.add(s4);
c.add(s5);

//遍历
Iterator it = c.iterator();
while(it.hasNext()){
	Student s = (Student)it.next();
	System.out.println(s.getName() + "---" + s.getAge());
}
结果：
	花绛沁---27
	花锦瑟---30
	尹幽妍---33
	上官柳丝---25
	蝶恋花---22


注意： NoSuchElementException 不要多次使用it.next()方法
	System.out.println(((Student) it.next()).getName() + 
		"---" + ((Student) it.next()).getAge());

结果：
	花绛沁---30
	尹幽妍---25
	Exception in thread "main" java.util.NoSuchElementException
```

![集合关系图](https://www.github.com/sun6145/githubPicture/raw/master/小书匠/集合关系图.png "集合关系图")
